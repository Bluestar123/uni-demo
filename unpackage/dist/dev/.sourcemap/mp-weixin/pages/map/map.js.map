{"version":3,"sources":["webpack:///C:/Users/lhht/Documents/HBuilderProjects/hello/pages/map/map.vue","webpack:///C:/Users/lhht/Documents/HBuilderProjects/hello/pages/map/map.vue?67ea","webpack:///C:/Users/lhht/Documents/HBuilderProjects/hello/main.js","webpack:///C:/Users/lhht/Documents/HBuilderProjects/hello/pages/map/map.vue?3030","webpack:///C:/Users/lhht/Documents/HBuilderProjects/hello/pages/map/map.vue?8edb","webpack:///C:/Users/lhht/Documents/HBuilderProjects/hello/pages/map/map.vue?3be9"],"names":["markersize","range","start","edge","step","ret","push","markers","northeast","southwest","scale","width","height","markerslng","longitude","markerslat","latitude","maxlon","minlon","maxlat","minlat","lons","lats","_markers","forEach","lon","i","lat","j","id","iconPath","alpha","data","polygons","controls","position","left","top","clickable","onReady","e","createMarkers","methods","tapa","console","log","regionchange","markertap","markerId","controltap","controlId","mapCtx","uni","createMapContext","query","createSelectorQuery","map","select","boundingClientRect","that","getRegion","success","res1","getScale","res2","exec","res","Page","App"],"mappings":"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","file":"pages/map/map.js","sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst markersize = 30;\r\n\r\nfunction range(start, edge, step) {\r\n\tfor (var ret = []; (edge - start) * step > 0; start += step) {\r\n\t\tret.push(start);\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nfunction markers(northeast, southwest, scale, width, height) {\r\n\tconst markerslng = ((northeast.longitude - southwest.longitude) * markersize) / width;\r\n\tconst markerslat = ((northeast.latitude - southwest.latitude) * markersize) / height;\r\n\r\n\tconst maxlon = northeast.longitude;\r\n\tconst minlon = southwest.longitude;\r\n\tconst maxlat = northeast.latitude;\r\n\tconst minlat = southwest.latitude;\r\n\r\n\tconst lons = range(minlon, maxlon, markerslng);\r\n\tconst lats = range(minlat, maxlat, markerslat);\r\n\r\n\tlet _markers = [];\r\n\tlons.forEach((lon, i) => {\r\n\t\tlats.forEach((lat, j) => {\r\n\t\t\t_markers.push({\r\n\t\t\t\tid: lon + ',' + lat,\r\n\t\t\t\tlatitude: lat,\r\n\t\t\t\tlongitude: lon,\r\n\t\t\t\ticonPath: '../../static/1.png',\r\n\t\t\t\talpha: 0.1, //将图片设置为透明,通过开发者工具看不出效果,但真机是有效果的\r\n\t\t\t\twidth: markersize,\r\n\t\t\t\theight: markersize\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\treturn _markers;\r\n}\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpolygons: [],\r\n\t\t\tcontrols: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tposition: {\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\ttop: 300 - 50,\r\n\t\t\t\t\t\twidth: 50,\r\n\t\t\t\t\t\theight: 50\r\n\t\t\t\t\t},\r\n\t\t\t\t\tclickable: true\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tmarkers: []\r\n\t\t};\r\n\t},\r\n\tonReady(e) {\r\n\t\tthis.createMarkers();\r\n\t},\r\n\tmethods: {\r\n\t\ttapa(){\r\n\t\t\tconsole.log(2222222)\r\n\t\t},\r\n\t\tregionchange(e) {\r\n\t\t\tthis.createMarkers();\r\n\t\t},\r\n\t\tmarkertap(e) {\r\n\t\t\tconsole.log(111111111111)\r\n\t\t\tconsole.log(e.markerId);\r\n\t\t},\r\n\t\tcontroltap(e) {\r\n\t\t\tconsole.log(222222222222)\r\n\t\t\tconsole.log(e.controlId);\r\n\t\t},\r\n\r\n\t\tcreateMarkers() {\r\n\t\t\tthis.mapCtx = uni.createMapContext('map');\r\n\t\t\tconst query = uni.createSelectorQuery();\r\n\t\t\tconst map = query.select('#map').boundingClientRect();\r\n\t\t\t\r\n\t\t\t/* var query = uni.createSelectorQuery();\r\n\t\t\tvar nodesRef = query.selectAll(\".item\");\r\n\t\t\tnodesRef.fields({\r\n\t\t\t\tdataset: true,\r\n\t\t\t\trect:true\r\n\t\t\t\t\t\r\n\t\t\t\t},(result)=>{\r\n\t\t\t\t\t_this.elements=result\r\n\t\t\t\t}).exec()\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet that = this;\r\n\r\n\t\t\tthat.mapCtx.getRegion({\r\n\t\t\t\tsuccess(res1) {\r\n\t\t\t\t\tthat.mapCtx.getScale({\r\n\t\t\t\t\t\tsuccess(res2) {\r\n\t\t\t\t\t\t\tquery.exec(res => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlet width = res[0].width;\r\n\t\t\t\t\t\t\t\tlet height = res[0].height;\r\n\t\t\t\t\t\t\t\tlet _markers = markers(res1.northeast, res1.southwest, res2.scale, width, height);\r\n\t\t\t\t\t\t\t\tthat.markers = _markers;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"view\",\n    [\n      _c(\"map\", {\n        staticStyle: { width: \"100%\", height: \"700px\" },\n        attrs: {\n          id: \"map\",\n          longitude: \"102.324520\",\n          latitude: \"40.099994\",\n          scale: \"4\",\n          polygons: _vm.polygons,\n          \"show-location\": \"\",\n          eventid: \"9ba8213a-0\"\n        },\n        on: {\n          controltap: _vm.controltap,\n          regionchange: _vm.regionchange,\n          markers: _vm.markers,\n          markertap: _vm.markertap,\n          tap: _vm.tapa\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/map/map.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=7b00c2cc&\"\nimport script from \"./map.vue?vue&type=script&lang=js&\"\nexport * from \"./map.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7b00c2cc', component.options)\n    } else {\n      api.reload('7b00c2cc', component.options)\n    }\n    module.hot.accept(\"./map.vue?vue&type=template&id=7b00c2cc&\", function () {\n      api.rerender('7b00c2cc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/lhht/Documents/HBuilderProjects/hello/pages/map/map.vue\"\nexport default component.exports","import mod from \"-!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"","export * from \"-!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\test_demo\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./map.vue?vue&type=template&id=7b00c2cc&\""],"sourceRoot":""}